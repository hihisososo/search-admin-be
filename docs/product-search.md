# 상품 검색 기능

## 개요
Elasticsearch 기반의 고성능 상품 검색 기능을 제공합니다. 다나와에서 수집한 약 4만건의 상품 데이터를 대상으로 실시간 검색이 가능합니다.

## 주요 기능

### 1. 통합 검색
- **API Endpoint**: `GET /api/v1/search`
- **설명**: 상품명, 브랜드, 카테고리를 통합하여 검색
- **특징**:
  - 한글 형태소 분석기(nori) 적용
  - 동의어 처리 지원
  - 오타 교정 기능
  - 가격/브랜드/카테고리별 필터링

### 2. 자동완성
- **API Endpoint**: `GET /api/v1/search/autocomplete`
- **설명**: 사용자 입력에 따른 실시간 검색어 자동완성
- **특징**:
  - Edge N-gram 토크나이저 활용
  - 인기 검색어 우선 노출
  - 최대 10개 추천어 제공

### 3. 검색 결과 정렬
- **정확도순**: 기본 정렬 (Elasticsearch 스코어 기반)
- **가격순**: 낮은 가격순/높은 가격순
- **인기순**: 클릭수 기반 정렬
- **최신순**: 상품 등록일 기준

## 검색 쿼리 예시

### 기본 검색
```json
GET /api/v1/search?query=노트북&size=20&page=0
```

### 필터 적용 검색
```json
GET /api/v1/search?query=맥북&minPrice=1000000&maxPrice=3000000&brand=Apple
```

### 자동완성
```json
GET /api/v1/search/autocomplete?query=아이폰&size=10
```

## 검색 품질 향상 전략

### 1. 사전 관리
- 동의어 사전: 노트북 ↔ 랩탑, 핸드폰 ↔ 스마트폰
- 오타교정 사전: 애플 → 애플, 삼숭 → 삼성
- 불용어 사전: 의, 를, 은, 는 등 제거

### 2. 가중치 전략
- 상품명: 2.0
- 브랜드명: 1.5
- 카테고리: 1.0
- 상품 설명: 0.5

### 3. 부스팅 전략
- 최근 클릭된 상품 스코어 증가
- 판매량 높은 상품 우선 노출
- 신상품 부스팅 (30일 이내)

## 성능 최적화

### 1. 인덱스 설정
```json
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1,
    "refresh_interval": "5s"
  }
}
```

### 2. 캐싱 전략
- Redis 캐싱: 인기 검색어 결과 5분간 캐싱
- Query 캐싱: Elasticsearch 내부 쿼리 캐시 활용
- Filter 캐싱: 자주 사용되는 필터 조건 캐싱

### 3. 검색 성능 지표
- 평균 응답 시간: < 100ms
- 최대 응답 시간: < 500ms
- 동시 처리 가능: 1000 req/s