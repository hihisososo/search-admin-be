Initialized native services in: C:\Users\lyj\.gradle\native
Initialized jansi services in: C:\Users\lyj\.gradle\native
The client will now receive all logging from the daemon (pid: 12216). The daemon log file: C:\Users\lyj\.gradle\daemon\8.14.2\daemon-12216.out.log
Starting 4th build in daemon [uptime: 3 mins 33.801 secs, performance: 100%, GC rate: 0.00/s, heap usage: 0% of 512 MiB, non-heap usage: 19% of 384 MiB]
Using 12 worker leases.
Now considering [C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2, C:\Users\lyj\Desktop\cursor_workspace\search-admin-be] as hierarchies to watch
Watching the file system is configured to be enabled if available
File system watching is active
Starting Build
Settings evaluated using settings file 'C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\settings.gradle'.
Projects loaded. Root project using build file 'C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build.gradle'.
Included projects: [root project 'search-admin-be']

> Configure project :
Evaluating root project 'search-admin-be' using build file 'C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build.gradle'.
Resolved plugin [id: 'java']
Resolved plugin [id: 'org.springframework.boot', version: '3.5.3']
Resolved plugin [id: 'io.spring.dependency-management', version: '1.1.7']
Resolved plugin [id: 'com.diffplug.spotless', version: '6.25.0']
Resolved plugin [id: 'jacoco']
Applying dependency management to configuration 'annotationProcessor' in project 'search-admin-be'
Applying dependency management to configuration 'apiElements' in project 'search-admin-be'
Applying dependency management to configuration 'archives' in project 'search-admin-be'
Applying dependency management to configuration 'bootArchives' in project 'search-admin-be'
Applying dependency management to configuration 'compileClasspath' in project 'search-admin-be'
Applying dependency management to configuration 'compileOnly' in project 'search-admin-be'
Applying dependency management to configuration 'default' in project 'search-admin-be'
Applying dependency management to configuration 'developmentOnly' in project 'search-admin-be'
Applying dependency management to configuration 'implementation' in project 'search-admin-be'
Applying dependency management to configuration 'mainSourceElements' in project 'search-admin-be'
Applying dependency management to configuration 'productionRuntimeClasspath' in project 'search-admin-be'
Applying dependency management to configuration 'runtimeClasspath' in project 'search-admin-be'
Applying dependency management to configuration 'runtimeElements' in project 'search-admin-be'
Applying dependency management to configuration 'runtimeOnly' in project 'search-admin-be'
Applying dependency management to configuration 'testAndDevelopmentOnly' in project 'search-admin-be'
Applying dependency management to configuration 'testAnnotationProcessor' in project 'search-admin-be'
Applying dependency management to configuration 'testCompileClasspath' in project 'search-admin-be'
Applying dependency management to configuration 'testCompileOnly' in project 'search-admin-be'
Applying dependency management to configuration 'testImplementation' in project 'search-admin-be'
Applying dependency management to configuration 'testResultsElementsForTest' in project 'search-admin-be'
Applying dependency management to configuration 'testRuntimeClasspath' in project 'search-admin-be'
Applying dependency management to configuration 'testRuntimeOnly' in project 'search-admin-be'
Applying dependency management to configuration 'jacocoAgent' in project 'search-admin-be'
Applying dependency management to configuration 'jacocoAnt' in project 'search-admin-be'
Applying dependency management to configuration 'coverageDataElementsForTest' in project 'search-admin-be'
All projects evaluated.
Task name matched 'test'
Selected primary task 'test' from project :
Resolving global dependency management for project 'search-admin-be'
Excluding [commons-logging:commons-logging]
Excluding []
Excluding []
Excluding []
Excluding [commons-logging:commons-logging]
Excluding []
Excluding [commons-logging:commons-logging]
Tasks to be executed: [task ':compileJava', task ':processResources', task ':classes', task ':compileTestJava', task ':processTestResources', task ':testClasses', task ':test']
Tasks that were excluded: []
Resolve mutations for :compileJava (Thread[Execution worker,5,main]) started.
:compileJava (Thread[Execution worker,5,main]) started.

> Task :compileJava UP-TO-DATE
Custom actions are attached to task ':compileJava'.
Caching disabled for task ':compileJava' because:
  Build cache is disabled
Skipping task ':compileJava' as it is up-to-date.
No compile result for :compileJava
Resolve mutations for :processResources (Thread[Execution worker,5,main]) started.
:processResources (Thread[Execution worker Thread 10,5,main]) started.

> Task :processResources UP-TO-DATE
Caching disabled for task ':processResources' because:
  Build cache is disabled
  Not worth caching
Skipping task ':processResources' as it is up-to-date.
Resolve mutations for :classes (Thread[Execution worker Thread 10,5,main]) started.
:classes (Thread[Execution worker Thread 10,5,main]) started.

> Task :classes UP-TO-DATE
Skipping task ':classes' as it has no actions.
Resolve mutations for :compileTestJava (Thread[Execution worker Thread 10,5,main]) started.
:compileTestJava (Thread[Execution worker Thread 10,5,main]) started.

> Task :compileTestJava
Custom actions are attached to task ':compileTestJava'.
Caching disabled for task ':compileTestJava' because:
  Build cache is disabled
Task ':compileTestJava' is not up-to-date because:
  Input property 'stableSources' file C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\src\test\java\com\yjlee\search\deployment\controller\DeploymentControllerTest.java has changed.
Compilation mode: in-process compilation
Created classpath snapshot for incremental compilation in 0.073 secs.
Compiling with toolchain 'C:\Program Files\Java\jdk-17'.
Compiling with JDK Java compiler API.
Incremental compilation of 1 classes completed in 1.339 secs.
Class dependency analysis for incremental compilation took 0.015 secs.
Resolve mutations for :processTestResources (Thread[Execution worker Thread 10,5,main]) started.
:processTestResources (Thread[Execution worker Thread 10,5,main]) started.

> Task :processTestResources UP-TO-DATE
Caching disabled for task ':processTestResources' because:
  Build cache is disabled
  Not worth caching
Skipping task ':processTestResources' as it is up-to-date.
Resolve mutations for :testClasses (Thread[Execution worker Thread 10,5,main]) started.
:testClasses (Thread[Execution worker Thread 10,5,main]) started.

> Task :testClasses
Skipping task ':testClasses' as it has no actions.
Resolve mutations for :test (Thread[Execution worker Thread 11,5,main]) started.
:test (Thread[Execution worker Thread 11,5,main]) started.
Gradle Test Executor 2 started executing tests.

> Task :test
Custom actions are attached to task ':test'.
Caching disabled for task ':test' because:
  Build cache is disabled
Task ':test' is not up-to-date because:
  Task has failed previously.
Starting process 'Gradle Test Executor 2'. Working directory: C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2 Command: C:\Program Files\Java\jdk-17\bin\java.exe -Dorg.gradle.internal.worker.tmpdir=C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build\tmp\test\work -javaagent:C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build\tmp\.cache\expanded\zip_cde35f471dab581134460fc9a50e2c59\jacocoagent.jar=destfile=build/jacoco/test.exec,append=true,inclnolocationclasses=false,dumponexit=true,output=file,jmx=false @C:\Users\lyj\.gradle\.tmp\gradle-worker-classpath2160813881991962608txt -Xmx512m -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant -ea worker.org.gradle.process.internal.worker.GradleWorkerMain 'Gradle Test Executor 2'
Successfully started process 'Gradle Test Executor 2'

DeploymentControllerTest STANDARD_OUT
    17:16:50.246 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.yjlee.search.deployment.controller.DeploymentControllerTest]: DeploymentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    17:16:50.718 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.yjlee.search.SearchAdminBeApplication for test class com.yjlee.search.deployment.controller.DeploymentControllerTest
    17:16:51.099 [Test worker] INFO org.testcontainers.images.PullPolicy -- Image pull policy will be performed by: DefaultPullPolicy()
    17:16:51.107 [Test worker] INFO org.testcontainers.utility.ImageNameSubstitutor -- Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
    17:16:51.152 [Test worker] INFO org.testcontainers.DockerClientFactory -- Testcontainers version: 1.20.4
    17:16:51.732 [Test worker] INFO org.testcontainers.dockerclient.DockerClientProviderStrategy -- Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
    17:16:52.262 [Test worker] INFO org.testcontainers.dockerclient.DockerClientProviderStrategy -- Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
    17:16:52.265 [Test worker] INFO org.testcontainers.DockerClientFactory -- Docker host IP address is localhost
    17:16:52.296 [Test worker] INFO org.testcontainers.DockerClientFactory -- Connected to docker: 
      Server Version: 28.2.2
      API Version: 1.50
      Operating System: Docker Desktop
      Total Memory: 7619 MB
      Labels: 
        com.docker.desktop.address=npipe://\\.\pipe\docker_cli
    17:16:52.348 [Test worker] INFO tc.testcontainers/ryuk:0.11.0 -- Creating container for image: testcontainers/ryuk:0.11.0
    17:16:52.650 [Test worker] INFO tc.testcontainers/ryuk:0.11.0 -- Container testcontainers/ryuk:0.11.0 is starting: 46aa852bf1e9b4449c4cf98367b26e69576930ed1b0f50f1ee42e5510485cd1c
    17:16:53.111 [Test worker] INFO tc.testcontainers/ryuk:0.11.0 -- Container testcontainers/ryuk:0.11.0 started in PT0.7629507S
    17:16:53.123 [Test worker] INFO org.testcontainers.utility.RyukResourceReaper -- Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
    17:16:53.124 [Test worker] INFO org.testcontainers.DockerClientFactory -- Checking the system...
    17:16:53.124 [Test worker] INFO org.testcontainers.DockerClientFactory -- ?? Docker server version should be at least 1.6.0
    17:16:53.124 [Test worker] INFO tc.hihisososo/elasticsearch-nori:8.18.3 -- Creating container for image: hihisososo/elasticsearch-nori:8.18.3
    17:16:53.690 [Test worker] WARN tc.hihisososo/elasticsearch-nori:8.18.3 -- Reuse was requested but the environment does not support the reuse of containers
    To enable reuse of containers, you must set 'testcontainers.reuse.enable=true' in a file located at C:\Users\lyj\.testcontainers.properties
    17:16:53.821 [Test worker] INFO tc.hihisososo/elasticsearch-nori:8.18.3 -- Container hihisososo/elasticsearch-nori:8.18.3 is starting: 0c5452a8637de25254f9d3374d1625bd487a81d3584c9bfc204f6dac43ab2d2e
    17:17:16.147 [Test worker] INFO tc.hihisososo/elasticsearch-nori:8.18.3 -- Container hihisososo/elasticsearch-nori:8.18.3 started in PT23.0227377S

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/

     :: Spring Boot ::                (v3.5.3)

    2025-08-03 17:17:17.330 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
    2025-08-03 17:17:17.474 [Test worker] INFO  c.y.s.d.c.DeploymentControllerTest - Starting DeploymentControllerTest using Java 17.0.10 with PID 16732 (started by lyj in C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2)
    2025-08-03 17:17:17.476 [Test worker] DEBUG c.y.s.d.c.DeploymentControllerTest - Running with Spring Boot v3.5.3, Spring v6.2.8
    2025-08-03 17:17:17.477 [Test worker] INFO  c.y.s.d.c.DeploymentControllerTest - The following 1 profile is active: "test"
    2025-08-03 17:17:19.395 [Test worker] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'ssmClient' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=true; fallback=false; factoryBeanName=com.yjlee.search.common.config.TestAwsConfig; factoryMethodName=ssmClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/yjlee/search/common/config/TestAwsConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=awsConfig; factoryMethodName=ssmClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/yjlee/search/config/AwsConfig.class]]
    2025-08-03 17:17:20.337 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-08-03 17:17:20.579 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 218 ms. Found 15 JPA repository interfaces.
    2025-08-03 17:17:21.818 [Test worker] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-08-03 17:17:21.946 [Test worker] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
    2025-08-03 17:17:22.016 [Test worker] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
    2025-08-03 17:17:22.601 [Test worker] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-08-03 17:17:22.662 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
    2025-08-03 17:17:23.074 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
    2025-08-03 17:17:23.077 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
    2025-08-03 17:17:23.123 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
    2025-08-03 17:17:23.162 [Test worker] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
    	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
    	Database driver: undefined/unknown
    	Database version: 2.3.232
    	Autocommit mode: undefined/unknown
    	Isolation level: undefined/unknown
    	Minimum pool size: undefined/unknown
    	Maximum pool size: undefined/unknown
    2025-08-03 17:17:25.198 [Test worker] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    Hibernate: drop table if exists async_tasks cascade 
    Hibernate: drop table if exists deployment_history cascade 
    Hibernate: drop table if exists evaluation_queries cascade 
    Hibernate: drop table if exists evaluation_reports cascade 
    Hibernate: drop table if exists index_environments cascade 
    Hibernate: drop table if exists products cascade 
    Hibernate: drop table if exists query_product_mappings cascade 
    Hibernate: drop table if exists stopword_dictionaries cascade 
    Hibernate: drop table if exists stopword_dictionary_snapshots cascade 
    Hibernate: drop table if exists synonym_dictionaries cascade 
    Hibernate: drop table if exists synonym_dictionary_snapshots cascade 
    Hibernate: drop table if exists typo_correction_dictionaries cascade 
    Hibernate: drop table if exists typo_correction_dictionary_snapshots cascade 
    Hibernate: drop table if exists user_dictionaries cascade 
    Hibernate: drop table if exists user_dictionary_snapshots cascade 
    Hibernate: create table async_tasks (progress integer not null, completed_at timestamp(6), created_at timestamp(6) not null, id bigint generated by default as identity, started_at timestamp(6), updated_at timestamp(6) not null, message varchar(1000), error_message TEXT, result TEXT, status enum ('COMPLETED','FAILED','IN_PROGRESS','PENDING') not null, task_type enum ('CANDIDATE_GENERATION','LLM_EVALUATION','QUERY_GENERATION') not null, primary key (id))
    Hibernate: create table deployment_history (created_at timestamp(6), deployment_time timestamp(6), document_count bigint, id bigint generated by default as identity, description varchar(255), version varchar(255) not null, deployment_type enum ('DEPLOYMENT','INDEXING') not null, status enum ('FAILED','IN_PROGRESS','SUCCESS') not null, primary key (id))
    Hibernate: create table evaluation_queries (count integer not null, created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, query varchar(500) not null unique, primary key (id))
    Hibernate: create table evaluation_reports (average_precision float(53) not null, average_recall float(53) not null, averagef1score float(53) not null, total_correct_documents integer not null, total_queries integer not null, total_relevant_documents integer not null, total_retrieved_documents integer not null, created_at timestamp(6) not null, id bigint generated by default as identity, detailed_results TEXT, report_name varchar(255) not null, primary key (id))
    Hibernate: create table index_environments (is_indexing boolean not null, created_at timestamp(6), document_count bigint, id bigint generated by default as identity, index_date timestamp(6), updated_at timestamp(6), index_name varchar(255) not null, version varchar(255), environment_type enum ('DEV','PROD') not null unique, index_status enum ('ACTIVE','FAILED','INACTIVE','INDEXING') not null, primary key (id))
    Hibernate: create table products (rating numeric(3,1), review_count integer, category_id bigint not null, created_at timestamp(6), id bigint generated by default as identity, price bigint, reg_month varchar(20), reg_date varchar(50), category_name varchar(100) not null, name varchar(500) not null unique, thumbnail_url varchar(1000), specs TEXT, primary key (id))
    Hibernate: create table query_product_mappings (evaluation_query_id bigint not null, id bigint generated by default as identity, evaluation_source varchar(20), evaluation_reason TEXT, product_id varchar(255) not null, relevance_status enum ('IRRELEVANT','RELEVANT','UNSPECIFIED'), primary key (id))
    Hibernate: create table stopword_dictionaries (created_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, primary key (id))
    Hibernate: create table stopword_dictionary_snapshots (created_at timestamp(6), id bigint generated by default as identity, original_dictionary_id bigint not null, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, environment_type enum ('CURRENT','DEV','PROD') not null, primary key (id))
    Hibernate: create table synonym_dictionaries (created_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, primary key (id))
    Hibernate: create table synonym_dictionary_snapshots (created_at timestamp(6), id bigint generated by default as identity, original_dictionary_id bigint not null, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, environment_type enum ('CURRENT','DEV','PROD') not null, primary key (id))
    Hibernate: create table typo_correction_dictionaries (created_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), corrected_word varchar(100) not null, keyword varchar(100) not null, description varchar(500), primary key (id))
    Hibernate: create table typo_correction_dictionary_snapshots (created_at timestamp(6), id bigint generated by default as identity, original_dictionary_id bigint not null, updated_at timestamp(6), corrected_word varchar(100) not null, keyword varchar(100) not null, description varchar(500), environment_type enum ('CURRENT','DEV','PROD') not null, primary key (id))
    Hibernate: create table user_dictionaries (created_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, primary key (id))
    Hibernate: create table user_dictionary_snapshots (created_at timestamp(6), id bigint generated by default as identity, original_dictionary_id bigint not null, updated_at timestamp(6), description varchar(500), keyword varchar(1000) not null, environment_type enum ('CURRENT','DEV','PROD') not null, primary key (id))
    Hibernate: alter table if exists query_product_mappings add constraint FKp9s7dbeu1471pk6o1npwosc2o foreign key (evaluation_query_id) references evaluation_queries
    2025-08-03 17:17:25.311 [Test worker] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-08-03 17:17:25.819 [Test worker] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
    2025-08-03 17:17:26.842 [Test worker] INFO  c.y.s.config.ElasticsearchConfig - Connecting to Elasticsearch at http://localhost:54497
    2025-08-03 17:17:28.558 [Test worker] INFO  com.yjlee.search.config.AwsConfig - AWS 자격 증명 제공자 초기화 중...
    2025-08-03 17:17:28.558 [Test worker] INFO  com.yjlee.search.config.AwsConfig - 환경변수에서 AWS 자격 증명 사용
    2025-08-03 17:17:28.569 [Test worker] INFO  com.yjlee.search.config.AwsConfig - SSM 클라이언트 초기화 - 리전: ap-northeast-2

Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

> Task :test
    2025-08-03 17:17:31.271 [Test worker] INFO  c.yjlee.search.config.SwaggerConfig - Initializing Swagger OpenAPI documentation
    2025-08-03 17:17:31.819 [Test worker] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
    2025-08-03 17:17:33.281 [Test worker] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
    2025-08-03 17:17:33.370 [Test worker] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
    2025-08-03 17:17:33.371 [Test worker] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
    2025-08-03 17:17:33.382 [Test worker] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
    2025-08-03 17:17:33.410 [Test worker] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 38 ms
    2025-08-03 17:17:33.550 [Test worker] INFO  c.y.s.d.c.DeploymentControllerTest - Started DeploymentControllerTest in 17.24 seconds (process running for 45.575)

DeploymentControllerTest > POST /api/v1/deployments/indexing - 색인 중복 실행 방지 STANDARD_OUT
    Hibernate: select dh1_0.id,dh1_0.created_at,dh1_0.deployment_time,dh1_0.deployment_type,dh1_0.description,dh1_0.document_count,dh1_0.status,dh1_0.version from deployment_history dh1_0
    Hibernate: select ie1_0.id,ie1_0.created_at,ie1_0.document_count,ie1_0.environment_type,ie1_0.index_date,ie1_0.index_name,ie1_0.index_status,ie1_0.is_indexing,ie1_0.updated_at,ie1_0.version from index_environments ie1_0
    2025-08-03 17:17:35.363 [Test worker] INFO  c.y.s.d.s.ElasticsearchIndexService - products-search alias 신규 생성 완료: products_search_prod_test
    Hibernate: insert into index_environments (created_at,document_count,environment_type,index_date,index_name,index_status,is_indexing,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,default)
    Hibernate: insert into index_environments (created_at,document_count,environment_type,index_date,index_name,index_status,is_indexing,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,default)
    Hibernate: insert into deployment_history (created_at,deployment_time,deployment_type,description,document_count,status,version,id) values (?,?,?,?,?,?,?,default)
    Hibernate: insert into deployment_history (created_at,deployment_time,deployment_type,description,document_count,status,version,id) values (?,?,?,?,?,?,?,default)
    Hibernate: select ie1_0.id,ie1_0.created_at,ie1_0.document_count,ie1_0.environment_type,ie1_0.index_date,ie1_0.index_name,ie1_0.index_status,ie1_0.is_indexing,ie1_0.updated_at,ie1_0.version from index_environments ie1_0 where ie1_0.environment_type=?
    2025-08-03 17:17:35.680 [Test worker] INFO  c.y.s.c.WebConfig$RequestLoggingInterceptor - Request started - Method: POST, URI: /api/v1/deployment/indexing, RemoteAddr: 127.0.0.1, UserAgent: null
    2025-08-03 17:17:35.804 [Test worker] INFO  c.y.s.d.s.DeploymentManagementService - 색인 실행 시작 - 설명: 중복 색인 시도
    Hibernate: update index_environments set created_at=?,document_count=?,environment_type=?,index_date=?,index_name=?,index_status=?,is_indexing=?,updated_at=?,version=? where id=?
    Hibernate: select ie1_0.id,ie1_0.created_at,ie1_0.document_count,ie1_0.environment_type,ie1_0.index_date,ie1_0.index_name,ie1_0.index_status,ie1_0.is_indexing,ie1_0.updated_at,ie1_0.version from index_environments ie1_0 where ie1_0.environment_type=?
    2025-08-03 17:17:35.873 [Test worker] INFO  c.y.s.c.WebConfig$RequestLoggingInterceptor - Request completed - Status: 400, Duration: 192ms, ContentType: application/json

    MockHttpServletRequest:
          HTTP Method = POST
          Request URI = /api/v1/deployment/indexing
           Parameters = {}
              Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
                 Body = {"description":"중복 색인 시도"}
        Session Attrs = {}

    Handler:
                 Type = com.yjlee.search.deployment.controller.DeploymentManagementController
               Method = com.yjlee.search.deployment.controller.DeploymentManagementController#executeIndexing(IndexingRequest)

    Async:
        Async started = false
         Async result = null

    Resolved Exception:
                 Type = null

    ModelAndView:
            View name = null
                 View = null
                Model = null

    FlashMap:
           Attributes = null

    MockHttpServletResponse:
               Status = 400
        Error message = null
              Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Trace-ID:"7955d8e7", Content-Type:"application/json"]
         Content type = application/json
                 Body = {"success":false,"message":"현재 색인이 진행 중입니다.","version":null,"historyId":null}
        Forwarded URL = null
       Redirected URL = null
              Cookies = []
    2025-08-03 17:17:35.979 [Test worker] INFO  c.y.s.d.s.ElasticsearchIndexService - 인덱스 삭제 완료: products_search_dev_test
    2025-08-03 17:17:36.030 [Test worker] INFO  c.y.s.d.s.ElasticsearchIndexService - 인덱스 삭제 완료: products_search_prod_test

    MockHttpServletRequest:
          HTTP Method = POST
          Request URI = /api/v1/deployment/indexing
           Parameters = {}
              Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
                 Body = {"description":"중복 색인 시도"}
        Session Attrs = {}

    Handler:
                 Type = com.yjlee.search.deployment.controller.DeploymentManagementController
               Method = com.yjlee.search.deployment.controller.DeploymentManagementController#executeIndexing(IndexingRequest)

    Async:
        Async started = false
         Async result = null

    Resolved Exception:
                 Type = null

    ModelAndView:
            View name = null
                 View = null
                Model = null

    FlashMap:
           Attributes = null

    MockHttpServletResponse:
               Status = 400
        Error message = null
              Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Trace-ID:"7955d8e7", Content-Type:"application/json"]
         Content type = application/json
                 Body = {"success":false,"message":"현재 색인이 진행 중입니다.","version":null,"historyId":null}
        Forwarded URL = null
       Redirected URL = null
              Cookies = []

DeploymentControllerTest > POST /api/v1/deployments/indexing - 색인 중복 실행 방지 FAILED
    java.lang.AssertionError: Status expected:<200> but was:<400>
        at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
        at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
        at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
        at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
        at com.yjlee.search.deployment.controller.DeploymentControllerTest.executeIndexing_PreventDuplicate(DeploymentControllerTest.java:328)

Gradle Test Executor 2 finished executing tests.
2025-08-03 17:17:37.467 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: drop table if exists async_tasks cascade 
Hibernate: drop table if exists deployment_history cascade 
Hibernate: drop table if exists evaluation_queries cascade 
Hibernate: drop table if exists evaluation_reports cascade 
Hibernate: drop table if exists index_environments cascade 
Hibernate: drop table if exists products cascade 
Hibernate: drop table if exists query_product_mappings cascade 
Hibernate: drop table if exists stopword_dictionaries cascade 
Hibernate: drop table if exists stopword_dictionary_snapshots cascade 
Hibernate: drop table if exists synonym_dictionaries cascade 
Hibernate: drop table if exists synonym_dictionary_snapshots cascade 
Hibernate: drop table if exists typo_correction_dictionaries cascade 
Hibernate: drop table if exists typo_correction_dictionary_snapshots cascade 
Hibernate: drop table if exists user_dictionaries cascade 
Hibernate: drop table if exists user_dictionary_snapshots cascade 
2025-08-03 17:17:37.486 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-08-03 17:17:37.490 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.

> Task :test FAILED

1 test completed, 1 failed
Finished generating test XML results (0.002 secs) into: C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build\test-results\test
Generating HTML test report...
Finished generating test html results (0.004 secs) into: C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2\build\reports\tests\test

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: file:///C:/Users/lyj/Desktop/cursor_workspace/search-admin-be-2/build/reports/tests/test/index.html

* Try:
> Run with --scan to get full insights.

BUILD FAILED in 54s
5 actionable tasks: 2 executed, 3 up-to-date
Watched directory hierarchies: [C:\Users\lyj\Desktop\cursor_workspace\search-admin-be-2, C:\Users\lyj\Desktop\cursor_workspace\search-admin-be]
